Index: menu-bar-switcher/AppDelegate.swift
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>import Cocoa\nimport ApplicationServices // 导入 ApplicationServices 框架以访问辅助功能 API\n\n// ------------------------------------------------------------------\n// 新增: 自定义 NSView，用于完全控制鼠标点击事件\n// ------------------------------------------------------------------\nclass CustomButtonView: NSView {\n    // 动作目标和选择器，用于左键点击时执行的 Swift 方法\n    weak var target: AnyObject?\n    var action: Selector?\n    // 菜单（右键点击时弹出）\n    var menuToDisplay: NSMenu?\n    // 按钮的图像\n    var buttonImage: NSImage?\n    \n    // ------------------------------------------------------------------\n    // 重写 init，设置视图大小和绘制\n    // ------------------------------------------------------------------\n    init(target: AnyObject?, action: Selector?, image: NSImage?, menu: NSMenu?) {\n        // FIX: 使用公共 API 'thickness' 来获取状态栏高度\n        let height = NSStatusBar.system.thickness\n        let width: CGFloat = 24.0 // 菜单栏图标的标准宽度\n        super.init(frame: NSRect(x: 0, y: 0, width: width, height: height))\n        self.target = target\n        self.action = action\n        self.buttonImage = image\n        self.menuToDisplay = menu\n    }\n    \n    required init?(coder: NSCoder) {\n        fatalError(\"init(coder:) has not been implemented\")\n    }\n    \n    // 绘制图标\n    override func draw(_ dirtyRect: NSRect) {\n        super.draw(dirtyRect)\n        \n        // 绘制图像\n        if let image = buttonImage {\n            // SFSymbols 图像的尺寸通常为 18x18\n            let imageSize: CGFloat = 18.0\n            let rect = NSMakeRect(\n                (bounds.width - imageSize) / 2,\n                (bounds.height - imageSize) / 2,\n                imageSize,\n                imageSize\n            )\n            image.draw(in: rect)\n        }\n    }\n    \n    // ------------------------------------------------------------------\n    // 核心修复: 分离左键和右键处理逻辑\n    // ------------------------------------------------------------------\n    \n    // 1. 处理左键点击 (mouseDown) 和 Control+左键\n    override func mouseDown(with event: NSEvent) {\n        // 检查是否按下 Control 键 (模拟右键行为)\n        if event.modifierFlags.contains(.control) {\n            showMenu()\n            return\n        }\n        \n        // 纯左键点击：执行动作\n        if let target = target, let action = action {\n            NSApp.sendAction(action, to: target, from: self)\n        }\n    }\n    \n    // 2. 处理右键点击 (rightMouseDown)\n    // FIX: 必须重写此方法才能捕获真正的右键点击\n    override func rightMouseDown(with event: NSEvent) {\n        showMenu()\n    }\n    \n    // 辅助方法：显示菜单\n    func showMenu() {\n        if let menu = menuToDisplay {\n            menu.popUp(\n                positioning: nil,\n                at: NSPoint(x: 0, y: bounds.height),\n                in: self\n            )\n        }\n    }\n}\n\nclass AppDelegate: NSObject, NSApplicationDelegate {\n    \n    // 菜单栏项目实例 1 (第一个图标 - 切换到左侧桌面)\n    var statusItemOne: NSStatusItem!\n    // 菜单栏项目实例 2 (第二个图标 - 切换到右侧桌面)\n    var statusItemTwo: NSStatusItem!\n    \n    // MARK: - App 生命周期\n    func applicationDidFinishLaunching(_ aNotification: Notification) {\n        \n        // FIX: 交换初始化顺序以调整图标在菜单栏的排列\n        // macOS 菜单栏通常从右向左填充。\n        // 先初始化 \"右箭头\" (Two)，它会先占据位置。\n        // 后初始化 \"左箭头\" (One)，它会插入到 \"右箭头\" 的左侧。\n        // 最终效果: [←] [→]\n        \n        // 1. 先设置第二个菜单栏项目 (右箭头)\n        setupStatusItemTwo()\n\n        // 2. 后设置第一个菜单栏项目 (左箭头)\n        setupStatusItemOne()\n        \n        // 提醒用户设置辅助功能权限\n        print(\"注意: 脚本执行需要 '系统设置' -> '隐私与安全性' -> '辅助功能' 中授予本应用权限。\")\n    }\n    \n    // MARK: - 图标设置函数\n    \n    // 设置第一个图标 (切换到左侧桌面)\n    func setupStatusItemOne() {\n        let statusBar = NSStatusBar.system\n        statusItemOne = statusBar.statusItem(withLength: NSStatusItem.variableLength)\n        \n        // 1. 创建退出菜单\n        let quitMenu = setupQuitMenu()\n        \n        // 2. 获取图标\n        let image = NSImage(systemSymbolName: \"arrow.left\", accessibilityDescription: \"Switch Left Desktop\")\n        \n        // 3. 创建自定义视图\n        let customView = CustomButtonView(\n            target: self,\n            action: #selector(switchToDesktopLeft),\n            image: image,\n            menu: quitMenu\n        )\n        \n        // 4. 将自定义视图赋给 statusItem\n        statusItemOne.view = customView\n    }\n    \n    // 设置第二个图标 (切换到右侧桌面)\n    func setupStatusItemTwo() {\n        let statusBar = NSStatusBar.system\n        statusItemTwo = statusBar.statusItem(withLength: NSStatusItem.variableLength)\n        \n        // 1. 创建退出菜单\n        let quitMenu = setupQuitMenu()\n        \n        // 2. 获取图标\n        let image = NSImage(systemSymbolName: \"arrow.right\", accessibilityDescription: \"Switch Right Desktop\")\n\n        // 3. 创建自定义视图\n        let customView = CustomButtonView(\n            target: self,\n            action: #selector(switchToDesktopRight),\n            image: image,\n            menu: quitMenu\n        )\n        \n        // 4. 将自定义视图赋给 statusItem\n        statusItemTwo.view = customView\n    }\n\n    // MARK: - 菜单设置函数\n    \n    // 统一创建退出菜单\n    func setupQuitMenu() -> NSMenu {\n        let menu = NSMenu()\n        let quitItem = NSMenuItem(title: \"退出应用\", action: #selector(NSApplication.terminate(_:)), keyEquivalent: \"\")\n        menu.addItem(quitItem)\n        \n        return menu\n    }\n    \n    // MARK: - 动作方法（Action Methods）\n    \n    // 切换到左侧桌面的动作 (Control + Left Arrow)\n    @objc func switchToDesktopLeft() {\n        print(\"尝试执行脚本：切换到左侧桌面 (Control + Left Arrow)\")\n        executeScript(keyCode: 123, modifier: \"control\") // 123 是左箭头键\n    }\n    \n    // 切换到右侧桌面的动作 (Control + Right Arrow)\n    @objc func switchToDesktopRight() {\n        print(\"尝试执行脚本：切换到右侧桌面 (Control + Right Arrow)\")\n        executeScript(keyCode: 124, modifier: \"control\") // 124 是右箭头键\n    }\n    \n    // (不再需要的动作，但保留以防万一)\n    @objc func switchToDesktopOne() { /* ... */ }\n    @objc func switchToDesktopTwo() { /* ... */ }\n    @objc func generateReportAction() { /* ... */ }\n\n\n    // 检查并请求辅助功能权限\n    func checkAccessibilityPermission() -> Bool {\n        // FIX: 移除自定义 NSAlert 弹窗，只保留系统触发逻辑\n        // AXIsProcessTrustedWithOptions 会检查权限状态。\n        // 传入 kAXTrustedCheckOptionPrompt: true 会让 macOS 在权限缺失时自动弹出系统的权限申请对话框。\n        let options: NSDictionary = [kAXTrustedCheckOptionPrompt.takeUnretainedValue() as NSString: true]\n        let isTrusted = AXIsProcessTrustedWithOptions(options)\n        \n        if isTrusted {\n            print(\"辅助功能权限已授予。\")\n        } else {\n            print(\"辅助功能权限缺失。已触发 macOS 系统原生申请弹窗。\")\n        }\n        return isTrusted\n    }\n    \n    // 统一的通用脚本执行函数\n    func executeScript(keyCode: Int, modifier: String) {\n        \n        // 1. 检查并请求辅助功能权限\n        if !checkAccessibilityPermission() {\n            // 如果权限检查失败，停止执行脚本\n            print(\"脚本执行中止：缺少辅助功能权限。\")\n            return\n        }\n        \n        // 2. 权限通过，执行脚本\n        let appleScript: String = \"\"\"\n            tell application \"System Events\"\n                key code \\(keyCode) using \\(modifier) down\n            end tell\n            \"\"\"\n        \n        // 执行 AppleScript\n        var error: NSDictionary?\n        if let script = NSAppleScript(source: appleScript) {\n            script.executeAndReturnError(&error)\n            if let error = error {\n                print(\"脚本执行错误: \\(error)\")\n                // 打印友好的提示信息\n                if error[\"NSAppleScriptErrorNumber\"] as? Int == -600 {\n                    print(\"--> 错误提示: 虽然权限已授予，但 System Events 仍无法响应。请确保您运行的是已构建且已授权的 .app 文件，而不是直接从 Xcode 临时目录启动。\")\n                } else if error[\"NSAppleScriptErrorNumber\"] as? Int == -1743 {\n                     print(\"--> 错误提示: 缺少自动化 (Automation) 权限。请在 Info.plist (Privacy - AppleEvents Sending Usage Description) 中添加描述并检查 '系统设置' -> '隐私与安全性' -> '自动化' 中是否已授权。\")\n                }\n            } else {\n                print(\"key code \\(keyCode) using \\(modifier) down 执行成功。\")\n            }\n        }\n    }\n}\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/menu-bar-switcher/AppDelegate.swift b/menu-bar-switcher/AppDelegate.swift
--- a/menu-bar-switcher/AppDelegate.swift	(revision 7000468bd527b476b8042a3e537143748ca41f35)
+++ b/menu-bar-switcher/AppDelegate.swift	(date 1770101392080)
@@ -86,14 +86,31 @@
 }
 
 class AppDelegate: NSObject, NSApplicationDelegate {
+    private enum DefaultsKey {
+        static let showMenuBarButtons = "showMenuBarButtons"
+        static let hoverShowDelay = "hoverShowDelay"
+        static let hoverHideDelay = "hoverHideDelay"
+    }
+
+    private let statusBar = NSStatusBar.system
     
     // 菜单栏项目实例 1 (第一个图标 - 切换到左侧桌面)
     var statusItemOne: NSStatusItem!
     // 菜单栏项目实例 2 (第二个图标 - 切换到右侧桌面)
     var statusItemTwo: NSStatusItem!
+    // 刘海触发协调器
+    var notchCoordinator: NotchHoverCoordinator?
+    // 鼠标悬停检测器
+    var hoverDetector: HoverDetector?
     
     // MARK: - App 生命周期
     func applicationDidFinishLaunching(_ aNotification: Notification) {
+        UserDefaults.standard.register(defaults: [
+            DefaultsKey.showMenuBarButtons: true,
+            DefaultsKey.hoverShowDelay: 0.18,
+            DefaultsKey.hoverHideDelay: 0.28
+        ])
+
         
         // FIX: 交换初始化顺序以调整图标在菜单栏的排列
         // macOS 菜单栏通常从右向左填充。
@@ -106,6 +123,20 @@
 
         // 2. 后设置第一个菜单栏项目 (左箭头)
         setupStatusItemOne()
+
+        // 3. 初始化刘海触发器（菜单栏正中 15% 区域）
+        setupNotchTrigger()
+
+        applySettings()
+        if !UserDefaults.standard.bool(forKey: DefaultsKey.showMenuBarButtons) {
+            SettingsWindowController.shared.show()
+        }
+        NotificationCenter.default.addObserver(
+            self,
+            selector: #selector(handleDefaultsChanged),
+            name: .settingsDidChange,
+            object: nil
+        )
         
         // 提醒用户设置辅助功能权限
         print("注意: 脚本执行需要 '系统设置' -> '隐私与安全性' -> '辅助功能' 中授予本应用权限。")
@@ -115,7 +146,6 @@
     
     // 设置第一个图标 (切换到左侧桌面)
     func setupStatusItemOne() {
-        let statusBar = NSStatusBar.system
         statusItemOne = statusBar.statusItem(withLength: NSStatusItem.variableLength)
         
         // 1. 创建退出菜单
@@ -138,7 +168,6 @@
     
     // 设置第二个图标 (切换到右侧桌面)
     func setupStatusItemTwo() {
-        let statusBar = NSStatusBar.system
         statusItemTwo = statusBar.statusItem(withLength: NSStatusItem.variableLength)
         
         // 1. 创建退出菜单
@@ -164,11 +193,71 @@
     // 统一创建退出菜单
     func setupQuitMenu() -> NSMenu {
         let menu = NSMenu()
+        let settingsItem = NSMenuItem(title: "设置…", action: #selector(openSettings), keyEquivalent: ",")
+        settingsItem.target = self
+        menu.addItem(settingsItem)
+        menu.addItem(.separator())
         let quitItem = NSMenuItem(title: "退出应用", action: #selector(NSApplication.terminate(_:)), keyEquivalent: "")
         menu.addItem(quitItem)
         
         return menu
     }
+
+    // MARK: - 刘海触发设置
+    func setupNotchTrigger() {
+        let defaults = UserDefaults.standard
+        let coordinator = NotchHoverCoordinator(
+            triggerWidthRatio: 0.15,
+            showDelay: defaults.double(forKey: DefaultsKey.hoverShowDelay),
+            hideDelay: defaults.double(forKey: DefaultsKey.hoverHideDelay),
+            onLeft: { [weak self] in
+                self?.switchToDesktopLeft()
+            },
+            onRight: { [weak self] in
+                self?.switchToDesktopRight()
+            }
+        )
+        notchCoordinator = coordinator
+        hoverDetector = HoverDetector { [weak coordinator] point in
+            coordinator?.handleMouseMoved(point)
+        }
+    }
+
+    @objc private func openSettings() {
+        SettingsWindowController.shared.show()
+    }
+
+    @objc private func handleDefaultsChanged() {
+        applySettings()
+    }
+
+    private func applySettings() {
+        let defaults = UserDefaults.standard
+        let showButtons = defaults.bool(forKey: DefaultsKey.showMenuBarButtons)
+        setMenuBarButtonsVisible(showButtons)
+        notchCoordinator?.updateDelays(
+            show: defaults.double(forKey: DefaultsKey.hoverShowDelay),
+            hide: defaults.double(forKey: DefaultsKey.hoverHideDelay)
+        )
+    }
+
+    private func setMenuBarButtonsVisible(_ visible: Bool) {
+        if visible {
+            if statusItemTwo == nil { setupStatusItemTwo() }
+            if statusItemOne == nil { setupStatusItemOne() }
+            statusItemOne?.isVisible = true
+            statusItemTwo?.isVisible = true
+        } else {
+            if let item = statusItemOne {
+                statusBar.removeStatusItem(item)
+                statusItemOne = nil
+            }
+            if let item = statusItemTwo {
+                statusBar.removeStatusItem(item)
+                statusItemTwo = nil
+            }
+        }
+    }
     
     // MARK: - 动作方法（Action Methods）
     
Index: menu-bar-switcher/menu_bar_switcherApp.swift
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>//\n//  menu_bar_switcherApp.swift\n//  menu-bar-switcher\n//\n//  Created by 数源 on 2025/12/1.\n//\n\nimport SwiftUI\n\n@main\nstruct menu_bar_switcherApp: App {\n//    var body: some Scene {\n//        WindowGroup {\n//            ContentView()\n//        }\n//    }\n    // 注入 AppDelegate，让它可以管理菜单栏\n        @NSApplicationDelegateAdaptor(AppDelegate.self) var appDelegate\n        \n        var body: some Scene {\n            // 隐藏默认的窗口/内容\n            Settings {\n                EmptyView()\n            }\n        }\n}\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/menu-bar-switcher/menu_bar_switcherApp.swift b/menu-bar-switcher/menu_bar_switcherApp.swift
--- a/menu-bar-switcher/menu_bar_switcherApp.swift	(revision 7000468bd527b476b8042a3e537143748ca41f35)
+++ b/menu-bar-switcher/menu_bar_switcherApp.swift	(date 1770102116961)
@@ -22,5 +22,13 @@
             Settings {
                 EmptyView()
             }
+            .commands {
+                CommandGroup(replacing: .appSettings) {
+                    Button("设置…") {
+                        SettingsWindowController.shared.show()
+                    }
+                    .keyboardShortcut(",", modifiers: .command)
+                }
+            }
         }
 }
Index: menu-bar-switcher.xcodeproj/project.pbxproj
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>// !$*UTF8*$!\n{\n\tarchiveVersion = 1;\n\tclasses = {\n\t};\n\tobjectVersion = 77;\n\tobjects = {\n\n/* Begin PBXFileReference section */\n\t\tACDAAF042EDD7E5C00BC22DB /* menu-bar-switcher.app */ = {isa = PBXFileReference; explicitFileType = wrapper.application; includeInIndex = 0; path = \"menu-bar-switcher.app\"; sourceTree = BUILT_PRODUCTS_DIR; };\n/* End PBXFileReference section */\n\n/* Begin PBXFileSystemSynchronizedRootGroup section */\n\t\tACDAAF062EDD7E5C00BC22DB /* menu-bar-switcher */ = {\n\t\t\tisa = PBXFileSystemSynchronizedRootGroup;\n\t\t\tpath = \"menu-bar-switcher\";\n\t\t\tsourceTree = \"<group>\";\n\t\t};\n/* End PBXFileSystemSynchronizedRootGroup section */\n\n/* Begin PBXFrameworksBuildPhase section */\n\t\tACDAAF012EDD7E5C00BC22DB /* Frameworks */ = {\n\t\t\tisa = PBXFrameworksBuildPhase;\n\t\t\tbuildActionMask = 2147483647;\n\t\t\tfiles = (\n\t\t\t);\n\t\t\trunOnlyForDeploymentPostprocessing = 0;\n\t\t};\n/* End PBXFrameworksBuildPhase section */\n\n/* Begin PBXGroup section */\n\t\tACDAAEFB2EDD7E5C00BC22DB = {\n\t\t\tisa = PBXGroup;\n\t\t\tchildren = (\n\t\t\t\tACDAAF062EDD7E5C00BC22DB /* menu-bar-switcher */,\n\t\t\t\tACDAAF052EDD7E5C00BC22DB /* Products */,\n\t\t\t);\n\t\t\tsourceTree = \"<group>\";\n\t\t};\n\t\tACDAAF052EDD7E5C00BC22DB /* Products */ = {\n\t\t\tisa = PBXGroup;\n\t\t\tchildren = (\n\t\t\t\tACDAAF042EDD7E5C00BC22DB /* menu-bar-switcher.app */,\n\t\t\t);\n\t\t\tname = Products;\n\t\t\tsourceTree = \"<group>\";\n\t\t};\n/* End PBXGroup section */\n\n/* Begin PBXNativeTarget section */\n\t\tACDAAF032EDD7E5C00BC22DB /* menu-bar-switcher */ = {\n\t\t\tisa = PBXNativeTarget;\n\t\t\tbuildConfigurationList = ACDAAF0F2EDD7E5D00BC22DB /* Build configuration list for PBXNativeTarget \"menu-bar-switcher\" */;\n\t\t\tbuildPhases = (\n\t\t\t\tACDAAF002EDD7E5C00BC22DB /* Sources */,\n\t\t\t\tACDAAF012EDD7E5C00BC22DB /* Frameworks */,\n\t\t\t\tACDAAF022EDD7E5C00BC22DB /* Resources */,\n\t\t\t);\n\t\t\tbuildRules = (\n\t\t\t);\n\t\t\tdependencies = (\n\t\t\t);\n\t\t\tfileSystemSynchronizedGroups = (\n\t\t\t\tACDAAF062EDD7E5C00BC22DB /* menu-bar-switcher */,\n\t\t\t);\n\t\t\tname = \"menu-bar-switcher\";\n\t\t\tpackageProductDependencies = (\n\t\t\t);\n\t\t\tproductName = \"menu-bar-switcher\";\n\t\t\tproductReference = ACDAAF042EDD7E5C00BC22DB /* menu-bar-switcher.app */;\n\t\t\tproductType = \"com.apple.product-type.application\";\n\t\t};\n/* End PBXNativeTarget section */\n\n/* Begin PBXProject section */\n\t\tACDAAEFC2EDD7E5C00BC22DB /* Project object */ = {\n\t\t\tisa = PBXProject;\n\t\t\tattributes = {\n\t\t\t\tBuildIndependentTargetsInParallel = 1;\n\t\t\t\tLastSwiftUpdateCheck = 2610;\n\t\t\t\tLastUpgradeCheck = 2610;\n\t\t\t\tTargetAttributes = {\n\t\t\t\t\tACDAAF032EDD7E5C00BC22DB = {\n\t\t\t\t\t\tCreatedOnToolsVersion = 26.1.1;\n\t\t\t\t\t};\n\t\t\t\t};\n\t\t\t};\n\t\t\tbuildConfigurationList = ACDAAEFF2EDD7E5C00BC22DB /* Build configuration list for PBXProject \"menu-bar-switcher\" */;\n\t\t\tdevelopmentRegion = en;\n\t\t\thasScannedForEncodings = 0;\n\t\t\tknownRegions = (\n\t\t\t\ten,\n\t\t\t\tBase,\n\t\t\t);\n\t\t\tmainGroup = ACDAAEFB2EDD7E5C00BC22DB;\n\t\t\tminimizedProjectReferenceProxies = 1;\n\t\t\tpreferredProjectObjectVersion = 77;\n\t\t\tproductRefGroup = ACDAAF052EDD7E5C00BC22DB /* Products */;\n\t\t\tprojectDirPath = \"\";\n\t\t\tprojectRoot = \"\";\n\t\t\ttargets = (\n\t\t\t\tACDAAF032EDD7E5C00BC22DB /* menu-bar-switcher */,\n\t\t\t);\n\t\t};\n/* End PBXProject section */\n\n/* Begin PBXResourcesBuildPhase section */\n\t\tACDAAF022EDD7E5C00BC22DB /* Resources */ = {\n\t\t\tisa = PBXResourcesBuildPhase;\n\t\t\tbuildActionMask = 2147483647;\n\t\t\tfiles = (\n\t\t\t);\n\t\t\trunOnlyForDeploymentPostprocessing = 0;\n\t\t};\n/* End PBXResourcesBuildPhase section */\n\n/* Begin PBXSourcesBuildPhase section */\n\t\tACDAAF002EDD7E5C00BC22DB /* Sources */ = {\n\t\t\tisa = PBXSourcesBuildPhase;\n\t\t\tbuildActionMask = 2147483647;\n\t\t\tfiles = (\n\t\t\t);\n\t\t\trunOnlyForDeploymentPostprocessing = 0;\n\t\t};\n/* End PBXSourcesBuildPhase section */\n\n/* Begin XCBuildConfiguration section */\n\t\tACDAAF0D2EDD7E5D00BC22DB /* Debug */ = {\n\t\t\tisa = XCBuildConfiguration;\n\t\t\tbuildSettings = {\n\t\t\t\tALWAYS_SEARCH_USER_PATHS = NO;\n\t\t\t\tASSETCATALOG_COMPILER_GENERATE_SWIFT_ASSET_SYMBOL_EXTENSIONS = YES;\n\t\t\t\tCLANG_ANALYZER_NONNULL = YES;\n\t\t\t\tCLANG_ANALYZER_NUMBER_OBJECT_CONVERSION = YES_AGGRESSIVE;\n\t\t\t\tCLANG_CXX_LANGUAGE_STANDARD = \"gnu++20\";\n\t\t\t\tCLANG_ENABLE_MODULES = YES;\n\t\t\t\tCLANG_ENABLE_OBJC_ARC = YES;\n\t\t\t\tCLANG_ENABLE_OBJC_WEAK = YES;\n\t\t\t\tCLANG_WARN_BLOCK_CAPTURE_AUTORELEASING = YES;\n\t\t\t\tCLANG_WARN_BOOL_CONVERSION = YES;\n\t\t\t\tCLANG_WARN_COMMA = YES;\n\t\t\t\tCLANG_WARN_CONSTANT_CONVERSION = YES;\n\t\t\t\tCLANG_WARN_DEPRECATED_OBJC_IMPLEMENTATIONS = YES;\n\t\t\t\tCLANG_WARN_DIRECT_OBJC_ISA_USAGE = YES_ERROR;\n\t\t\t\tCLANG_WARN_DOCUMENTATION_COMMENTS = YES;\n\t\t\t\tCLANG_WARN_EMPTY_BODY = YES;\n\t\t\t\tCLANG_WARN_ENUM_CONVERSION = YES;\n\t\t\t\tCLANG_WARN_INFINITE_RECURSION = YES;\n\t\t\t\tCLANG_WARN_INT_CONVERSION = YES;\n\t\t\t\tCLANG_WARN_NON_LITERAL_NULL_CONVERSION = YES;\n\t\t\t\tCLANG_WARN_OBJC_IMPLICIT_RETAIN_SELF = YES;\n\t\t\t\tCLANG_WARN_OBJC_LITERAL_CONVERSION = YES;\n\t\t\t\tCLANG_WARN_OBJC_ROOT_CLASS = YES_ERROR;\n\t\t\t\tCLANG_WARN_QUOTED_INCLUDE_IN_FRAMEWORK_HEADER = YES;\n\t\t\t\tCLANG_WARN_RANGE_LOOP_ANALYSIS = YES;\n\t\t\t\tCLANG_WARN_STRICT_PROTOTYPES = YES;\n\t\t\t\tCLANG_WARN_SUSPICIOUS_MOVE = YES;\n\t\t\t\tCLANG_WARN_UNGUARDED_AVAILABILITY = YES_AGGRESSIVE;\n\t\t\t\tCLANG_WARN_UNREACHABLE_CODE = YES;\n\t\t\t\tCLANG_WARN__DUPLICATE_METHOD_MATCH = YES;\n\t\t\t\tCOPY_PHASE_STRIP = NO;\n\t\t\t\tDEBUG_INFORMATION_FORMAT = dwarf;\n\t\t\t\tENABLE_STRICT_OBJC_MSGSEND = YES;\n\t\t\t\tENABLE_TESTABILITY = YES;\n\t\t\t\tENABLE_USER_SCRIPT_SANDBOXING = NO;\n\t\t\t\tGCC_C_LANGUAGE_STANDARD = gnu17;\n\t\t\t\tGCC_DYNAMIC_NO_PIC = NO;\n\t\t\t\tGCC_NO_COMMON_BLOCKS = YES;\n\t\t\t\tGCC_OPTIMIZATION_LEVEL = 0;\n\t\t\t\tGCC_PREPROCESSOR_DEFINITIONS = (\n\t\t\t\t\t\"DEBUG=1\",\n\t\t\t\t\t\"$(inherited)\",\n\t\t\t\t);\n\t\t\t\tGCC_WARN_64_TO_32_BIT_CONVERSION = YES;\n\t\t\t\tGCC_WARN_ABOUT_RETURN_TYPE = YES_ERROR;\n\t\t\t\tGCC_WARN_UNDECLARED_SELECTOR = YES;\n\t\t\t\tGCC_WARN_UNINITIALIZED_AUTOS = YES_AGGRESSIVE;\n\t\t\t\tGCC_WARN_UNUSED_FUNCTION = YES;\n\t\t\t\tGCC_WARN_UNUSED_VARIABLE = YES;\n\t\t\t\tLOCALIZATION_PREFERS_STRING_CATALOGS = YES;\n\t\t\t\tMACOSX_DEPLOYMENT_TARGET = 26.1;\n\t\t\t\tMTL_ENABLE_DEBUG_INFO = INCLUDE_SOURCE;\n\t\t\t\tMTL_FAST_MATH = YES;\n\t\t\t\tONLY_ACTIVE_ARCH = YES;\n\t\t\t\tSDKROOT = macosx;\n\t\t\t\tSWIFT_ACTIVE_COMPILATION_CONDITIONS = \"DEBUG $(inherited)\";\n\t\t\t\tSWIFT_OPTIMIZATION_LEVEL = \"-Onone\";\n\t\t\t};\n\t\t\tname = Debug;\n\t\t};\n\t\tACDAAF0E2EDD7E5D00BC22DB /* Release */ = {\n\t\t\tisa = XCBuildConfiguration;\n\t\t\tbuildSettings = {\n\t\t\t\tALWAYS_SEARCH_USER_PATHS = NO;\n\t\t\t\tASSETCATALOG_COMPILER_GENERATE_SWIFT_ASSET_SYMBOL_EXTENSIONS = YES;\n\t\t\t\tCLANG_ANALYZER_NONNULL = YES;\n\t\t\t\tCLANG_ANALYZER_NUMBER_OBJECT_CONVERSION = YES_AGGRESSIVE;\n\t\t\t\tCLANG_CXX_LANGUAGE_STANDARD = \"gnu++20\";\n\t\t\t\tCLANG_ENABLE_MODULES = YES;\n\t\t\t\tCLANG_ENABLE_OBJC_ARC = YES;\n\t\t\t\tCLANG_ENABLE_OBJC_WEAK = YES;\n\t\t\t\tCLANG_WARN_BLOCK_CAPTURE_AUTORELEASING = YES;\n\t\t\t\tCLANG_WARN_BOOL_CONVERSION = YES;\n\t\t\t\tCLANG_WARN_COMMA = YES;\n\t\t\t\tCLANG_WARN_CONSTANT_CONVERSION = YES;\n\t\t\t\tCLANG_WARN_DEPRECATED_OBJC_IMPLEMENTATIONS = YES;\n\t\t\t\tCLANG_WARN_DIRECT_OBJC_ISA_USAGE = YES_ERROR;\n\t\t\t\tCLANG_WARN_DOCUMENTATION_COMMENTS = YES;\n\t\t\t\tCLANG_WARN_EMPTY_BODY = YES;\n\t\t\t\tCLANG_WARN_ENUM_CONVERSION = YES;\n\t\t\t\tCLANG_WARN_INFINITE_RECURSION = YES;\n\t\t\t\tCLANG_WARN_INT_CONVERSION = YES;\n\t\t\t\tCLANG_WARN_NON_LITERAL_NULL_CONVERSION = YES;\n\t\t\t\tCLANG_WARN_OBJC_IMPLICIT_RETAIN_SELF = YES;\n\t\t\t\tCLANG_WARN_OBJC_LITERAL_CONVERSION = YES;\n\t\t\t\tCLANG_WARN_OBJC_ROOT_CLASS = YES_ERROR;\n\t\t\t\tCLANG_WARN_QUOTED_INCLUDE_IN_FRAMEWORK_HEADER = YES;\n\t\t\t\tCLANG_WARN_RANGE_LOOP_ANALYSIS = YES;\n\t\t\t\tCLANG_WARN_STRICT_PROTOTYPES = YES;\n\t\t\t\tCLANG_WARN_SUSPICIOUS_MOVE = YES;\n\t\t\t\tCLANG_WARN_UNGUARDED_AVAILABILITY = YES_AGGRESSIVE;\n\t\t\t\tCLANG_WARN_UNREACHABLE_CODE = YES;\n\t\t\t\tCLANG_WARN__DUPLICATE_METHOD_MATCH = YES;\n\t\t\t\tCOPY_PHASE_STRIP = NO;\n\t\t\t\tDEBUG_INFORMATION_FORMAT = \"dwarf-with-dsym\";\n\t\t\t\tENABLE_NS_ASSERTIONS = NO;\n\t\t\t\tENABLE_STRICT_OBJC_MSGSEND = YES;\n\t\t\t\tENABLE_USER_SCRIPT_SANDBOXING = NO;\n\t\t\t\tGCC_C_LANGUAGE_STANDARD = gnu17;\n\t\t\t\tGCC_NO_COMMON_BLOCKS = YES;\n\t\t\t\tGCC_WARN_64_TO_32_BIT_CONVERSION = YES;\n\t\t\t\tGCC_WARN_ABOUT_RETURN_TYPE = YES_ERROR;\n\t\t\t\tGCC_WARN_UNDECLARED_SELECTOR = YES;\n\t\t\t\tGCC_WARN_UNINITIALIZED_AUTOS = YES_AGGRESSIVE;\n\t\t\t\tGCC_WARN_UNUSED_FUNCTION = YES;\n\t\t\t\tGCC_WARN_UNUSED_VARIABLE = YES;\n\t\t\t\tLOCALIZATION_PREFERS_STRING_CATALOGS = YES;\n\t\t\t\tMACOSX_DEPLOYMENT_TARGET = 26.1;\n\t\t\t\tMTL_ENABLE_DEBUG_INFO = NO;\n\t\t\t\tMTL_FAST_MATH = YES;\n\t\t\t\tSDKROOT = macosx;\n\t\t\t\tSWIFT_COMPILATION_MODE = wholemodule;\n\t\t\t};\n\t\t\tname = Release;\n\t\t};\n\t\tACDAAF102EDD7E5D00BC22DB /* Debug */ = {\n\t\t\tisa = XCBuildConfiguration;\n\t\t\tbuildSettings = {\n\t\t\t\tASSETCATALOG_COMPILER_APPICON_NAME = AppIcon;\n\t\t\t\tASSETCATALOG_COMPILER_GLOBAL_ACCENT_COLOR_NAME = AccentColor;\n\t\t\t\tCODE_SIGN_STYLE = Automatic;\n\t\t\t\tCOMBINE_HIDPI_IMAGES = YES;\n\t\t\t\tCURRENT_PROJECT_VERSION = 1;\n\t\t\t\tENABLE_APP_SANDBOX = NO;\n\t\t\t\tENABLE_PREVIEWS = YES;\n\t\t\t\tENABLE_USER_SELECTED_FILES = readonly;\n\t\t\t\tGENERATE_INFOPLIST_FILE = YES;\n\t\t\t\tINFOPLIST_KEY_LSUIElement = YES;\n\t\t\t\tINFOPLIST_KEY_NSAppleEventsUsageDescription = \"本应用需要控制 System Events 来模拟键盘输入，以实现桌面切换功能。\";\n\t\t\t\tINFOPLIST_KEY_NSHumanReadableCopyright = \"\";\n\t\t\t\tLD_RUNPATH_SEARCH_PATHS = (\n\t\t\t\t\t\"$(inherited)\",\n\t\t\t\t\t\"@executable_path/../Frameworks\",\n\t\t\t\t);\n\t\t\t\tMARKETING_VERSION = 1.0;\n\t\t\t\tPRODUCT_BUNDLE_IDENTIFIER = \"px.menu-bar-switcher\";\n\t\t\t\tPRODUCT_NAME = \"$(TARGET_NAME)\";\n\t\t\t\tREGISTER_APP_GROUPS = YES;\n\t\t\t\tSTRING_CATALOG_GENERATE_SYMBOLS = YES;\n\t\t\t\tSWIFT_APPROACHABLE_CONCURRENCY = YES;\n\t\t\t\tSWIFT_DEFAULT_ACTOR_ISOLATION = MainActor;\n\t\t\t\tSWIFT_EMIT_LOC_STRINGS = YES;\n\t\t\t\tSWIFT_UPCOMING_FEATURE_MEMBER_IMPORT_VISIBILITY = YES;\n\t\t\t\tSWIFT_VERSION = 5.0;\n\t\t\t};\n\t\t\tname = Debug;\n\t\t};\n\t\tACDAAF112EDD7E5D00BC22DB /* Release */ = {\n\t\t\tisa = XCBuildConfiguration;\n\t\t\tbuildSettings = {\n\t\t\t\tASSETCATALOG_COMPILER_APPICON_NAME = AppIcon;\n\t\t\t\tASSETCATALOG_COMPILER_GLOBAL_ACCENT_COLOR_NAME = AccentColor;\n\t\t\t\tCODE_SIGN_STYLE = Automatic;\n\t\t\t\tCOMBINE_HIDPI_IMAGES = YES;\n\t\t\t\tCURRENT_PROJECT_VERSION = 1;\n\t\t\t\tENABLE_APP_SANDBOX = NO;\n\t\t\t\tENABLE_PREVIEWS = YES;\n\t\t\t\tENABLE_USER_SELECTED_FILES = readonly;\n\t\t\t\tGENERATE_INFOPLIST_FILE = YES;\n\t\t\t\tINFOPLIST_KEY_LSUIElement = YES;\n\t\t\t\tINFOPLIST_KEY_NSAppleEventsUsageDescription = \"本应用需要控制 System Events 来模拟键盘输入，以实现桌面切换功能。\";\n\t\t\t\tINFOPLIST_KEY_NSHumanReadableCopyright = \"\";\n\t\t\t\tLD_RUNPATH_SEARCH_PATHS = (\n\t\t\t\t\t\"$(inherited)\",\n\t\t\t\t\t\"@executable_path/../Frameworks\",\n\t\t\t\t);\n\t\t\t\tMARKETING_VERSION = 1.0;\n\t\t\t\tPRODUCT_BUNDLE_IDENTIFIER = \"px.menu-bar-switcher\";\n\t\t\t\tPRODUCT_NAME = \"$(TARGET_NAME)\";\n\t\t\t\tREGISTER_APP_GROUPS = YES;\n\t\t\t\tSTRING_CATALOG_GENERATE_SYMBOLS = YES;\n\t\t\t\tSWIFT_APPROACHABLE_CONCURRENCY = YES;\n\t\t\t\tSWIFT_DEFAULT_ACTOR_ISOLATION = MainActor;\n\t\t\t\tSWIFT_EMIT_LOC_STRINGS = YES;\n\t\t\t\tSWIFT_UPCOMING_FEATURE_MEMBER_IMPORT_VISIBILITY = YES;\n\t\t\t\tSWIFT_VERSION = 5.0;\n\t\t\t};\n\t\t\tname = Release;\n\t\t};\n/* End XCBuildConfiguration section */\n\n/* Begin XCConfigurationList section */\n\t\tACDAAEFF2EDD7E5C00BC22DB /* Build configuration list for PBXProject \"menu-bar-switcher\" */ = {\n\t\t\tisa = XCConfigurationList;\n\t\t\tbuildConfigurations = (\n\t\t\t\tACDAAF0D2EDD7E5D00BC22DB /* Debug */,\n\t\t\t\tACDAAF0E2EDD7E5D00BC22DB /* Release */,\n\t\t\t);\n\t\t\tdefaultConfigurationIsVisible = 0;\n\t\t\tdefaultConfigurationName = Release;\n\t\t};\n\t\tACDAAF0F2EDD7E5D00BC22DB /* Build configuration list for PBXNativeTarget \"menu-bar-switcher\" */ = {\n\t\t\tisa = XCConfigurationList;\n\t\t\tbuildConfigurations = (\n\t\t\t\tACDAAF102EDD7E5D00BC22DB /* Debug */,\n\t\t\t\tACDAAF112EDD7E5D00BC22DB /* Release */,\n\t\t\t);\n\t\t\tdefaultConfigurationIsVisible = 0;\n\t\t\tdefaultConfigurationName = Release;\n\t\t};\n/* End XCConfigurationList section */\n\t};\n\trootObject = ACDAAEFC2EDD7E5C00BC22DB /* Project object */;\n}\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/menu-bar-switcher.xcodeproj/project.pbxproj b/menu-bar-switcher.xcodeproj/project.pbxproj
--- a/menu-bar-switcher.xcodeproj/project.pbxproj	(revision 7000468bd527b476b8042a3e537143748ca41f35)
+++ b/menu-bar-switcher.xcodeproj/project.pbxproj	(date 1770101392097)
@@ -6,6 +6,10 @@
 	objectVersion = 77;
 	objects = {
 
+/* Begin PBXBuildFile section */
+		A75DFBA615DF496DAA2E6999 /* NotchNotification in Frameworks */ = {isa = PBXBuildFile; productRef = 20E67EBD86FD415F90ABA219 /* NotchNotification */; };
+/* End PBXBuildFile section */
+
 /* Begin PBXFileReference section */
 		ACDAAF042EDD7E5C00BC22DB /* menu-bar-switcher.app */ = {isa = PBXFileReference; explicitFileType = wrapper.application; includeInIndex = 0; path = "menu-bar-switcher.app"; sourceTree = BUILT_PRODUCTS_DIR; };
 /* End PBXFileReference section */
@@ -23,6 +27,7 @@
 			isa = PBXFrameworksBuildPhase;
 			buildActionMask = 2147483647;
 			files = (
+				A75DFBA615DF496DAA2E6999 /* NotchNotification in Frameworks */,
 			);
 			runOnlyForDeploymentPostprocessing = 0;
 		};
@@ -65,6 +70,7 @@
 			);
 			name = "menu-bar-switcher";
 			packageProductDependencies = (
+				20E67EBD86FD415F90ABA219 /* NotchNotification */,
 			);
 			productName = "menu-bar-switcher";
 			productReference = ACDAAF042EDD7E5C00BC22DB /* menu-bar-switcher.app */;
@@ -94,6 +100,9 @@
 			);
 			mainGroup = ACDAAEFB2EDD7E5C00BC22DB;
 			minimizedProjectReferenceProxies = 1;
+			packageReferences = (
+				A857E10957774F38872E9A18 /* XCLocalSwiftPackageReference "Packages/NotchNotification" */,
+			);
 			preferredProjectObjectVersion = 77;
 			productRefGroup = ACDAAF052EDD7E5C00BC22DB /* Products */;
 			projectDirPath = "";
@@ -329,6 +338,21 @@
 			defaultConfigurationName = Release;
 		};
 /* End XCConfigurationList section */
+
+/* Begin XCLocalSwiftPackageReference section */
+		A857E10957774F38872E9A18 /* XCLocalSwiftPackageReference "Packages/NotchNotification" */ = {
+			isa = XCLocalSwiftPackageReference;
+			relativePath = Packages/NotchNotification;
+		};
+/* End XCLocalSwiftPackageReference section */
+
+/* Begin XCSwiftPackageProductDependency section */
+		20E67EBD86FD415F90ABA219 /* NotchNotification */ = {
+			isa = XCSwiftPackageProductDependency;
+			package = A857E10957774F38872E9A18 /* XCLocalSwiftPackageReference "Packages/NotchNotification" */;
+			productName = NotchNotification;
+		};
+/* End XCSwiftPackageProductDependency section */
 	};
 	rootObject = ACDAAEFC2EDD7E5C00BC22DB /* Project object */;
 }
Index: .idea/vcs.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<project version=\"4\">\n  <component name=\"VcsDirectoryMappings\">\n    <mapping directory=\"\" vcs=\"Git\" />\n  </component>\n</project>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/.idea/vcs.xml b/.idea/vcs.xml
--- a/.idea/vcs.xml	(revision 7000468bd527b476b8042a3e537143748ca41f35)
+++ b/.idea/vcs.xml	(date 1770101392103)
@@ -2,5 +2,6 @@
 <project version="4">
   <component name="VcsDirectoryMappings">
     <mapping directory="" vcs="Git" />
+    <mapping directory="$PROJECT_DIR$/Packages/NotchNotification" vcs="Git" />
   </component>
 </project>
\ No newline at end of file
Index: menu-bar-switcher/.idea/.gitignore
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/menu-bar-switcher/.idea/.gitignore b/menu-bar-switcher/.idea/.gitignore
new file mode 100644
--- /dev/null	(date 1770101398131)
+++ b/menu-bar-switcher/.idea/.gitignore	(date 1770101398131)
@@ -0,0 +1,8 @@
+# 默认忽略的文件
+/shelf/
+/workspace.xml
+# 基于编辑器的 HTTP 客户端请求
+/httpRequests/
+# Datasource local storage ignored files
+/dataSources/
+/dataSources.local.xml
Index: menu-bar-switcher/.idea/modules.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/menu-bar-switcher/.idea/modules.xml b/menu-bar-switcher/.idea/modules.xml
new file mode 100644
--- /dev/null	(date 1770101398119)
+++ b/menu-bar-switcher/.idea/modules.xml	(date 1770101398119)
@@ -0,0 +1,8 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<project version="4">
+  <component name="ProjectModuleManager">
+    <modules>
+      <module fileurl="file://$PROJECT_DIR$/.idea/menu-bar-switcher.iml" filepath="$PROJECT_DIR$/.idea/menu-bar-switcher.iml" />
+    </modules>
+  </component>
+</project>
\ No newline at end of file
Index: menu-bar-switcher.xcodeproj/xcuserdata/work.xcuserdatad/xcschemes/xcschememanagement.plist
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/menu-bar-switcher.xcodeproj/xcuserdata/work.xcuserdatad/xcschemes/xcschememanagement.plist b/menu-bar-switcher.xcodeproj/xcuserdata/work.xcuserdatad/xcschemes/xcschememanagement.plist
new file mode 100644
--- /dev/null	(date 1770101393310)
+++ b/menu-bar-switcher.xcodeproj/xcuserdata/work.xcuserdatad/xcschemes/xcschememanagement.plist	(date 1770101393310)
@@ -0,0 +1,14 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
+<plist version="1.0">
+<dict>
+	<key>SchemeUserState</key>
+	<dict>
+		<key>menu-bar-switcher.xcscheme_^#shared#^_</key>
+		<dict>
+			<key>orderHint</key>
+			<integer>0</integer>
+		</dict>
+	</dict>
+</dict>
+</plist>
Index: menu-bar-switcher/SettingsWindowController.swift
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/menu-bar-switcher/SettingsWindowController.swift b/menu-bar-switcher/SettingsWindowController.swift
new file mode 100644
--- /dev/null	(date 1770101398161)
+++ b/menu-bar-switcher/SettingsWindowController.swift	(date 1770101398161)
@@ -0,0 +1,33 @@
+import Cocoa
+import SwiftUI
+
+final class SettingsWindowController: NSWindowController {
+    static let shared = SettingsWindowController()
+
+    private init() {
+        let view = SettingsView()
+        let hostingView = NSHostingView(rootView: view)
+        let window = NSWindow(
+            contentRect: NSRect(x: 0, y: 0, width: 360, height: 220),
+            styleMask: [.titled, .closable],
+            backing: .buffered,
+            defer: false
+        )
+        window.contentView = hostingView
+        window.title = "设置"
+        window.contentMinSize = NSSize(width: 320, height: 200)
+        window.center()
+        super.init(window: window)
+    }
+
+    @available(*, unavailable)
+    required init?(coder: NSCoder) {
+        fatalError("init(coder:) has not been implemented")
+    }
+
+    func show() {
+        guard let window else { return }
+        NSApp.activate(ignoringOtherApps: true)
+        window.makeKeyAndOrderFront(nil)
+    }
+}
Index: menu-bar-switcher/NotificationNames.swift
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/menu-bar-switcher/NotificationNames.swift b/menu-bar-switcher/NotificationNames.swift
new file mode 100644
--- /dev/null	(date 1770101398153)
+++ b/menu-bar-switcher/NotificationNames.swift	(date 1770101398153)
@@ -0,0 +1,5 @@
+import Foundation
+
+extension Notification.Name {
+    static let settingsDidChange = Notification.Name("settingsDidChange")
+}
Index: menu-bar-switcher/.idea/menu-bar-switcher.iml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/menu-bar-switcher/.idea/menu-bar-switcher.iml b/menu-bar-switcher/.idea/menu-bar-switcher.iml
new file mode 100644
--- /dev/null	(date 1770101398141)
+++ b/menu-bar-switcher/.idea/menu-bar-switcher.iml	(date 1770101398141)
@@ -0,0 +1,12 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<module type="WEB_MODULE" version="4">
+  <component name="NewModuleRootManager">
+    <content url="file://$MODULE_DIR$">
+      <excludeFolder url="file://$MODULE_DIR$/.tmp" />
+      <excludeFolder url="file://$MODULE_DIR$/temp" />
+      <excludeFolder url="file://$MODULE_DIR$/tmp" />
+    </content>
+    <orderEntry type="inheritedJdk" />
+    <orderEntry type="sourceFolder" forTests="false" />
+  </component>
+</module>
\ No newline at end of file
Index: menu-bar-switcher/NotchHoverCoordinator.swift
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/menu-bar-switcher/NotchHoverCoordinator.swift b/menu-bar-switcher/NotchHoverCoordinator.swift
new file mode 100644
--- /dev/null	(date 1770101820831)
+++ b/menu-bar-switcher/NotchHoverCoordinator.swift	(date 1770101820831)
@@ -0,0 +1,171 @@
+import Cocoa
+import SwiftUI
+import NotchNotification
+
+final class HoverDetector {
+    private var globalMonitor: Any?
+    private var localMonitor: Any?
+    private let handler: (NSPoint) -> Void
+
+    init(handler: @escaping (NSPoint) -> Void) {
+        self.handler = handler
+        globalMonitor = NSEvent.addGlobalMonitorForEvents(matching: [.mouseMoved]) { _ in
+            handler(NSEvent.mouseLocation)
+        }
+        localMonitor = NSEvent.addLocalMonitorForEvents(matching: [.mouseMoved]) { event in
+            handler(NSEvent.mouseLocation)
+            return event
+        }
+    }
+
+    deinit {
+        if let globalMonitor {
+            NSEvent.removeMonitor(globalMonitor)
+        }
+        if let localMonitor {
+            NSEvent.removeMonitor(localMonitor)
+        }
+    }
+}
+
+struct NotchSwitchView: View {
+    let onLeft: () -> Void
+    let onRight: () -> Void
+
+    var body: some View {
+        ZStack {
+            HStack(spacing: 18) {
+                Button(action: onLeft) {
+                    Image(systemName: "arrow.left")
+                        .font(.system(size: 16, weight: .semibold))
+                        .foregroundColor(.white)
+                }
+                .buttonStyle(.plain)
+
+                Button(action: onRight) {
+                    Image(systemName: "arrow.right")
+                        .font(.system(size: 16, weight: .semibold))
+                        .foregroundColor(.white)
+                }
+                .buttonStyle(.plain)
+            }
+            .padding(.vertical, 8)
+        }
+        .frame(maxWidth: .infinity, maxHeight: .infinity)
+        .contentShape(Rectangle())
+        .contextMenu {
+            Button("设置…") {
+                SettingsWindowController.shared.show()
+            }
+            Divider()
+            Button("退出应用") {
+                NSApplication.shared.terminate(nil)
+            }
+        }
+    }
+}
+
+final class NotchHoverCoordinator {
+    private let controller: NotchHoverController
+    private let triggerWidthRatio: CGFloat
+    private var showDelay: TimeInterval
+    private var hideDelay: TimeInterval
+    private var showWorkItem: DispatchWorkItem?
+    private var hideWorkItem: DispatchWorkItem?
+
+    private let onLeft: () -> Void
+    private let onRight: () -> Void
+
+    init(
+        triggerWidthRatio: CGFloat,
+        showDelay: TimeInterval,
+        hideDelay: TimeInterval,
+        onLeft: @escaping () -> Void,
+        onRight: @escaping () -> Void
+    ) {
+        self.triggerWidthRatio = triggerWidthRatio
+        self.showDelay = max(0, showDelay)
+        self.hideDelay = max(0, hideDelay)
+        self.onLeft = onLeft
+        self.onRight = onRight
+        self.controller = NotchHoverController(
+            configuration: .init(
+                minWidth: 260,
+                minWidthExtra: 80,
+                heightMultiplier: 2,
+                animated: true
+            )
+        )
+    }
+
+    func handleMouseMoved(_ point: NSPoint) {
+        guard let screen = screenContaining(point) else { return }
+        let menuBarHeight = screen.frame.maxY - screen.visibleFrame.maxY
+        let menuBarYMin = screen.frame.maxY - menuBarHeight
+
+        let inMenuBar = point.y >= menuBarYMin && point.y <= screen.frame.maxY
+        let centerHalfWidth = (screen.frame.width * triggerWidthRatio) / 2
+        let inCenter = abs(point.x - screen.frame.midX) <= centerHalfWidth
+        let inTrigger = inMenuBar && inCenter
+        let inNotch = controller.contains(point)
+
+        if inTrigger || inNotch {
+            scheduleShow(on: screen)
+        } else {
+            scheduleHide()
+        }
+    }
+
+    func updateDelays(show: TimeInterval, hide: TimeInterval) {
+        showDelay = max(0, show)
+        hideDelay = max(0, hide)
+    }
+
+    private func scheduleShow(on screen: NSScreen) {
+        hideWorkItem?.cancel()
+        showWorkItem?.cancel()
+
+        if controller.isVisible {
+            controller.updateScreenIfNeeded(screen)
+            return
+        }
+
+        let workItem = DispatchWorkItem { [weak self] in
+            self?.show(on: screen)
+        }
+        showWorkItem = workItem
+        DispatchQueue.main.asyncAfter(deadline: .now() + showDelay, execute: workItem)
+    }
+
+    private func scheduleHide() {
+        showWorkItem?.cancel()
+        hideWorkItem?.cancel()
+
+        if !controller.isVisible {
+            return
+        }
+
+        let workItem = DispatchWorkItem { [weak self] in
+            self?.controller.hide()
+        }
+        hideWorkItem = workItem
+        DispatchQueue.main.asyncAfter(deadline: .now() + hideDelay, execute: workItem)
+    }
+
+    private func show(on screen: NSScreen) {
+        let contentView = NotchSwitchView(onLeft: onLeft, onRight: onRight)
+        controller.show(
+            on: screen,
+            leadingView: EmptyView(),
+            trailingView: EmptyView(),
+            bodyView: contentView
+        )
+    }
+
+    private func screenContaining(_ point: NSPoint) -> NSScreen? {
+        for screen in NSScreen.screens where screen.frame.contains(point) {
+            return screen
+        }
+        return NSScreen.main
+    }
+}
Index: .idea/inspectionProfiles/Project_Default.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/.idea/inspectionProfiles/Project_Default.xml b/.idea/inspectionProfiles/Project_Default.xml
new file mode 100644
--- /dev/null	(date 1770103024640)
+++ b/.idea/inspectionProfiles/Project_Default.xml	(date 1770103024640)
@@ -0,0 +1,22 @@
+<component name="InspectionProjectProfileManager">
+  <profile version="1.0">
+    <option name="myName" value="Project Default" />
+    <inspection_tool class="HtmlUnknownTag" enabled="false" level="WARNING" enabled_by_default="false">
+      <option name="myValues">
+        <value>
+          <list size="6">
+            <item index="0" class="java.lang.String" itemvalue="nobr" />
+            <item index="1" class="java.lang.String" itemvalue="noembed" />
+            <item index="2" class="java.lang.String" itemvalue="comment" />
+            <item index="3" class="java.lang.String" itemvalue="noscript" />
+            <item index="4" class="java.lang.String" itemvalue="embed" />
+            <item index="5" class="java.lang.String" itemvalue="script" />
+          </list>
+        </value>
+      </option>
+      <option name="myCustomValuesEnabled" value="true" />
+    </inspection_tool>
+    <inspection_tool class="VueMissingComponentImportInspection" enabled="false" level="WARNING" enabled_by_default="false" />
+    <inspection_tool class="VueUnrecognizedDirective" enabled="false" level="WARNING" enabled_by_default="false" />
+  </profile>
+</component>
\ No newline at end of file
Index: menu-bar-switcher/SettingsView.swift
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/menu-bar-switcher/SettingsView.swift b/menu-bar-switcher/SettingsView.swift
new file mode 100644
--- /dev/null	(date 1770101398175)
+++ b/menu-bar-switcher/SettingsView.swift	(date 1770101398175)
@@ -0,0 +1,56 @@
+import SwiftUI
+import NotchNotification
+
+struct SettingsView: View {
+    @AppStorage("showMenuBarButtons") private var showMenuBarButtons = true
+    @AppStorage("hoverShowDelay") private var hoverShowDelay = 0.18
+    @AppStorage("hoverHideDelay") private var hoverHideDelay = 0.28
+
+    private let delayRange: ClosedRange<Double> = 0...1.5
+    private let step: Double = 0.05
+
+    var body: some View {
+        VStack(alignment: .leading, spacing: 16) {
+            Toggle("在菜单栏显示切换按钮", isOn: $showMenuBarButtons)
+
+            VStack(alignment: .leading, spacing: 8) {
+                Text("刘海触发延迟（秒）")
+                    .font(.headline)
+                delayRow(title: "展开延迟", value: $hoverShowDelay)
+                delayRow(title: "关闭延迟", value: $hoverHideDelay)
+            }
+        }
+        .padding(20)
+        .frame(width: 360, height: 200, alignment: .topLeading)
+        .onChange(of: showMenuBarButtons) { _ in
+            NotificationCenter.default.post(name: .settingsDidChange, object: nil)
+            if showMenuBarButtons == false {
+                NotchNotification.present(
+                    message: "菜单栏图标已隐藏，下次启动将自动打开设置"
+                )
+            }
+        }
+        .onChange(of: hoverShowDelay) { _ in
+            NotificationCenter.default.post(name: .settingsDidChange, object: nil)
+        }
+        .onChange(of: hoverHideDelay) { _ in
+            NotificationCenter.default.post(name: .settingsDidChange, object: nil)
+        }
+    }
+
+    @ViewBuilder
+    private func delayRow(title: String, value: Binding<Double>) -> some View {
+        HStack {
+            Text(title)
+            Spacer()
+            Stepper(value: value, in: delayRange, step: step) {
+                Text(String(format: "%.2f", value.wrappedValue))
+                    .monospacedDigit()
+            }
+        }
+    }
+}
+
+#Preview {
+    SettingsView()
+}
Index: menu-bar-switcher/.idea/vcs.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/menu-bar-switcher/.idea/vcs.xml b/menu-bar-switcher/.idea/vcs.xml
new file mode 100644
--- /dev/null	(date 1770101398168)
+++ b/menu-bar-switcher/.idea/vcs.xml	(date 1770101398168)
@@ -0,0 +1,6 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<project version="4">
+  <component name="VcsDirectoryMappings">
+    <mapping directory="$PROJECT_DIR$/.." vcs="Git" />
+  </component>
+</project>
\ No newline at end of file
